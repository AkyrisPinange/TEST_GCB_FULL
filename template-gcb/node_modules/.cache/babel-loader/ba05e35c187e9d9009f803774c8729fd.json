{"ast":null,"code":"var _jsxFileName = \"/Users/effetive/Documents/React-APP/template-gcb/src/pages/doctors/Form/index.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { Button, Form, Col, Row } from \"react-bootstrap\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport Select from \"react-select\";\nimport InputMask from \"react-input-mask\";\nimport api from \"../../../services/api\";\nimport \"./../index.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar SpecialtiesSelect;\nvar IDs; //inferces para facilitar a manipulação dos dados\n\nconst listSpecialties = [\"Alergologia\", \"Angiologia\", \"Buco maxilo\", \"Cardiologia clínca\", \"Cardiologia infantil\", \"Cirurgia cabeça e pescoço\", \"Cirurgia cardíaca\", \"Cirurgia de tórax\"]; //dados para o dropdowns\n\nconst SpecialtiesOptions = [{\n  value: \"Alergologia\",\n  label: \"Alergologia\"\n}, {\n  value: \"Angiologia\",\n  label: \"Angiologia\"\n}, {\n  value: \"Buco maxilo\",\n  label: \"Buco maxilo\"\n}, {\n  value: \"Cardiologia clínca\",\n  label: \"Cardiologia clínca\"\n}, {\n  value: \"Cardiologia infantil\",\n  label: \"Cardiologia infantil\"\n}, {\n  value: \"Cirurgia cabeça e pescoço\",\n  label: \"Cirurgia cabeça e pescoço\"\n}, {\n  value: \"Cirurgia cardíaca\",\n  label: \"Cirurgia cardíaca\"\n}, {\n  value: \"Cirurgia de tórax\",\n  label: \"Cirurgia de tórax\"\n}]; //REACT\n\nconst Doctors = () => {\n  _s();\n\n  useEffect(() => {\n    loadSpecialties();\n  });\n  const history = useHistory();\n  const params = useParams();\n  useEffect(() => {\n    FindDoctorAdress(params);\n  }, [params]); //useState\n\n  const [cep, setCep] = useState({\n    cep: \"\"\n  });\n  const [specialtiesDoctor, setSpecialtiesDoctor] = useState({\n    id_doctor: \"\",\n    id_specialties: \"\"\n  });\n  const [adress, setAdress] = useState({\n    id: \"\",\n    cep: \"\",\n    logradouro: \"\",\n    complemento: \"\",\n    bairro: \"\",\n    localidade: \"\",\n    id_doctor: \"\",\n    uf: \"\"\n  });\n  const [doctor, setDoctor] = useState({\n    id: \"\",\n    nome: \"\",\n    crm: 0,\n    telFixo: 0,\n    telCelular: 0\n  }); //cadastra especialidades no banco se não existirem\n\n  async function loadSpecialties() {\n    const getSpecialties = await api.get(\"/Specialties\");\n\n    if (getSpecialties.data.length == 0) {\n      listSpecialties.forEach(index => {\n        registerSpecialties(index);\n      });\n    } // SpecialtiesSelect = getSpecialties.data;\n\n  }\n\n  async function registerSpecialties(specialties) {\n    const responseSpecialties = await api.post(\"Specialties\", {\n      name: specialties\n    });\n  } //funcao responsavel por consultar o cep\n\n\n  async function GetCep(e) {\n    setAdress({ ...adress,\n      //garante que o input só recebera numeros\n      [e.target.name]: e.target.value.replace(/\\D/g, \"\")\n    });\n    let lengthCep = e.target.value.replace(/\\D/g, \"\").length;\n    let cepNumber = e.target.value.replace(/\\D/g, \"\"); //valida se o usuario digitou os 8 digitos cep para poder fazer a requisicao\n\n    if (lengthCep == 8) {\n      const resp = await api.post(`/CEP/${cepNumber}`);\n      console.log(resp.data.cep);\n      setAdress({\n        id: \"\",\n        cep: resp.data.cep == undefined ? \"\" : resp.data.cep,\n        logradouro: resp.data.logradouro == undefined ? \"\" : resp.data.logradouro,\n        complemento: resp.data.complemento == undefined ? \"\" : resp.data.complemento,\n        bairro: resp.data.bairro == undefined ? \"\" : resp.data.bairro,\n        localidade: resp.data.localidade == undefined ? \"\" : resp.data.localidade,\n        uf: resp.data.uf == undefined ? \"\" : resp.data.uf,\n        id_doctor: \"\"\n      });\n    }\n  }\n\n  function UpdatedSpecialties(e) {\n    SpecialtiesSelect = e;\n  }\n\n  function UpdatedDoctor(e) {\n    setDoctor({ ...doctor,\n      [e.target.name]: e.target.value\n    });\n  }\n\n  function UpdatedAdress(e) {\n    setAdress({ ...adress,\n      [e.target.name]: e.target.value\n    });\n  }\n\n  async function FindDoctorAdress(params) {\n    let IDs = params.ID.split(\"&&\");\n    let id_adress = atob(IDs[0]);\n    let id_doctor = atob(IDs[1]);\n    const responseAdress = await api.post(`/AdressById/${id_doctor}`);\n    const responseDoctor = await api.post(`/InfoDoctorsById/${id_adress}`); //\n\n    setAdress({\n      id: id_adress,\n      cep: responseAdress.data.cep,\n      logradouro: responseAdress.data.logradouro,\n      complemento: responseAdress.data.complemento,\n      bairro: responseAdress.data.bairro,\n      localidade: responseAdress.data.localidade,\n      uf: responseAdress.data.uf,\n      id_doctor: id_doctor\n    });\n    setDoctor({\n      id: id_doctor,\n      nome: responseDoctor.data.name,\n      crm: responseDoctor.data.crm,\n      telFixo: responseDoctor.data.telFixo,\n      telCelular: responseDoctor.data.telCelular\n    });\n    console.log;\n  }\n\n  async function onSubmit(e) {\n    e.preventDefault();\n    let numberCel = doctor.telCelular.toString().replaceAll(\"(\", \"\").replace(\")\", \"\").replace(\"-\", \"\");\n    let numberFix = doctor.telFixo.toString().replace(\"(\", \"\").replace(\")\", \"\").replace(\"-\", \"\");\n    doctor.telCelular = parseInt(numberCel);\n    doctor.telFixo = parseInt(numberFix);\n    const respDoctor = await api.post(\"/InfoDoctors\", doctor); // console.log(respDoctor);\n\n    adress.id_doctor = respDoctor.data.id;\n    const respAdress = await api.post(\"/Adress\", adress);\n    console.log(respAdress);\n    var arraySpecialties = [];\n    const respSpecialties = await api.get(\"/Specialties\");\n    console.log(SpecialtiesSelect);\n    SpecialtiesSelect.forEach(index => {\n      arraySpecialties.push(respSpecialties.data.filter(s => s.name === index.value));\n    });\n    await Promise.all(arraySpecialties.map(async elem => {\n      let id_specialties = elem[0].id;\n      let id_doctor = respDoctor.data.id;\n      const respSpecialtiesDoctor = await api.post(\"/InfoDoctorsSpecialties\", {\n        id_specialties: id_specialties,\n        id_doctor: id_doctor\n      });\n    }));\n  }\n\n  function Back() {\n    history.goBack();\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Header-doctors\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Cadastro\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"dark\",\n        size: \"sm\",\n        onClick: Back,\n        children: \"Voltar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: /*#__PURE__*/_jsxDEV(Form, {\n        onSubmit: onSubmit,\n        children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            children: \"Nome\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            maxLength: 120,\n            value: doctor.nome,\n            type: \"text\",\n            name: \"nome\",\n            onChange: e => UpdatedDoctor(e)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          children: [/*#__PURE__*/_jsxDEV(Row, {\n            children: [/*#__PURE__*/_jsxDEV(Col, {\n              children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                children: \"Tel. Celular\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 290,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(InputMask, {\n                placeholder: \"(81)88888-8888\",\n                value: doctor.telCelular,\n                className: \"phone\",\n                name: \"telCelular\",\n                mask: \"(99)999999-9999\",\n                onChange: e => UpdatedDoctor(e)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 291,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 289,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                children: \"Tel. Fixo\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 303,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(InputMask, {\n                placeholder: \"(81)88888-8888\",\n                value: doctor.telFixo,\n                className: \"phone\",\n                name: \"telFixo\",\n                mask: \"(99)999999-9999\",\n                onChange: e => UpdatedDoctor(e)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 304,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 302,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                children: \"CRM\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 316,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                maxLength: 7,\n                value: doctor.crm,\n                type: \"text\",\n                name: \"crm\",\n                onChange: e => UpdatedDoctor(e)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 317,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 328,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Form.Label, {\n            children: \"Especialidades\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 329,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Select, {\n            isMulti: true,\n            name: \"specialties\",\n            options: SpecialtiesOptions,\n            className: \"basic-multi-select\",\n            classNamePrefix: \"Selecione\",\n            placeholder: \"Selecione\",\n            onChange: e => UpdatedSpecialties(e)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 330,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Cadastro de Endere\\xE7o\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          children: [/*#__PURE__*/_jsxDEV(Row, {\n            children: [/*#__PURE__*/_jsxDEV(Col, {\n              children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                children: \"CEP\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 346,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                type: \"text\",\n                name: \"cep\",\n                maxLength: 8,\n                placeholder: \"Digite o CEP\",\n                value: adress.cep,\n                onChange: e => GetCep(e)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 347,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 345,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                children: \"Cidade\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 357,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                placeholder: \"\",\n                type: \"text\",\n                name: \"localidade\",\n                value: adress.localidade,\n                onChange: e => UpdatedAdress(e)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 358,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 356,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                children: \"Estado\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 369,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                placeholder: \"\",\n                type: \"text\",\n                name: \"uf\",\n                value: adress.uf,\n                onChange: e => UpdatedAdress(e)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 370,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 368,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 344,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Row, {\n            children: [/*#__PURE__*/_jsxDEV(Col, {\n              children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                children: \"Logradouro\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 383,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                placeholder: \"\",\n                type: \"text\",\n                name: \"logradouro\",\n                value: adress.logradouro,\n                onChange: e => UpdatedAdress(e)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 384,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 382,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                children: \"Bairro\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 395,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                placeholder: \"\",\n                type: \"text\",\n                name: \"bairro\",\n                value: adress.bairro,\n                onChange: e => UpdatedAdress(e)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 396,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 394,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                children: \"Complemento\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 407,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                placeholder: \"\",\n                type: \"text\",\n                name: \"complemento\",\n                value: adress.complemento,\n                onChange: e => UpdatedAdress(e)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 408,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 406,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 381,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 420,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"dark\",\n          type: \"submit\",\n          children: \"Salvar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 421,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 265,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Doctors, \"j8J3mMs7QwCpg/a1KnghQzYshdQ=\", false, function () {\n  return [useHistory, useParams];\n});\n\n_c = Doctors;\nexport default Doctors;\n\nvar _c;\n\n$RefreshReg$(_c, \"Doctors\");","map":{"version":3,"sources":["/Users/effetive/Documents/React-APP/template-gcb/src/pages/doctors/Form/index.tsx"],"names":["React","useState","useEffect","Button","Form","Col","Row","useHistory","useParams","Select","InputMask","api","SpecialtiesSelect","IDs","listSpecialties","SpecialtiesOptions","value","label","Doctors","loadSpecialties","history","params","FindDoctorAdress","cep","setCep","specialtiesDoctor","setSpecialtiesDoctor","id_doctor","id_specialties","adress","setAdress","id","logradouro","complemento","bairro","localidade","uf","doctor","setDoctor","nome","crm","telFixo","telCelular","getSpecialties","get","data","length","forEach","index","registerSpecialties","specialties","responseSpecialties","post","name","GetCep","e","target","replace","lengthCep","cepNumber","resp","console","log","undefined","UpdatedSpecialties","UpdatedDoctor","UpdatedAdress","ID","split","id_adress","atob","responseAdress","responseDoctor","onSubmit","preventDefault","numberCel","toString","replaceAll","numberFix","parseInt","respDoctor","respAdress","arraySpecialties","respSpecialties","push","filter","s","Promise","all","map","elem","respSpecialtiesDoctor","Back","goBack"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, ChangeEvent, KeyboardEvent } from \"react\";\nimport { Button, Form, Col, Row, Alert } from \"react-bootstrap\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport Select from \"react-select\";\nimport InputMask from \"react-input-mask\";\n\nimport * as Yup from \"yup\";\n\nimport api from \"../../../services/api\";\n\nimport \"./../index.css\";\n\nvar SpecialtiesSelect: any;\nvar IDs: any;\n//inferces para facilitar a manipulação dos dados\ninterface IDoctor {\n  id: string;\n  nome: string;\n  crm: number;\n  telFixo: number;\n  telCelular: number;\n}\n\ntype OptionType = {\n  value: string;\n  label: string;\n};\ninterface ISpecialtiesDoctor {\n  id_doctor: string;\n  id_specialties: string;\n}\n\ninterface IAdress {\n  id: string;\n  cep: string;\n  logradouro: string;\n  complemento: string;\n  bairro: string;\n  localidade: string;\n  id_doctor: string;\n  uf: string;\n}\n\ninterface Icep {\n  cep: string;\n}\n\nconst listSpecialties = [\n  \"Alergologia\",\n  \"Angiologia\",\n  \"Buco maxilo\",\n  \"Cardiologia clínca\",\n  \"Cardiologia infantil\",\n  \"Cirurgia cabeça e pescoço\",\n  \"Cirurgia cardíaca\",\n  \"Cirurgia de tórax\",\n];\n\n//dados para o dropdowns\nconst SpecialtiesOptions: OptionType[] = [\n  { value: \"Alergologia\", label: \"Alergologia\" },\n  { value: \"Angiologia\", label: \"Angiologia\" },\n  { value: \"Buco maxilo\", label: \"Buco maxilo\" },\n  { value: \"Cardiologia clínca\", label: \"Cardiologia clínca\" },\n  { value: \"Cardiologia infantil\", label: \"Cardiologia infantil\" },\n  { value: \"Cirurgia cabeça e pescoço\", label: \"Cirurgia cabeça e pescoço\" },\n  { value: \"Cirurgia cardíaca\", label: \"Cirurgia cardíaca\" },\n  { value: \"Cirurgia de tórax\", label: \"Cirurgia de tórax\" },\n];\n\n//REACT\nconst Doctors: React.FC = () => {\n  useEffect(() => {\n    loadSpecialties();\n  });\n\n  const history = useHistory();\n  const params = useParams();\n\n  useEffect(() => {\n    FindDoctorAdress(params);\n  }, [params]);\n\n  //useState\n  const [cep, setCep] = useState<Icep>({\n    cep: \"\",\n  });\n\n  const [specialtiesDoctor, setSpecialtiesDoctor] =\n    useState<ISpecialtiesDoctor>({\n      id_doctor: \"\",\n      id_specialties: \"\",\n    });\n\n  const [adress, setAdress] = useState<IAdress>({\n    id: \"\",\n    cep: \"\",\n    logradouro: \"\",\n    complemento: \"\",\n    bairro: \"\",\n    localidade: \"\",\n    id_doctor: \"\",\n    uf: \"\",\n  });\n\n  const [doctor, setDoctor] = useState<IDoctor>({\n    id: \"\",\n    nome: \"\",\n    crm: 0,\n    telFixo: 0,\n    telCelular: 0,\n  });\n\n  //cadastra especialidades no banco se não existirem\n  async function loadSpecialties() {\n    const getSpecialties = await api.get(\"/Specialties\");\n\n    if (getSpecialties.data.length == 0) {\n      listSpecialties.forEach((index) => {\n        registerSpecialties(index);\n      });\n    }\n\n    // SpecialtiesSelect = getSpecialties.data;\n  }\n\n  async function registerSpecialties(specialties: string) {\n    const responseSpecialties = await api.post(\"Specialties\", {\n      name: specialties,\n    });\n  }\n\n  //funcao responsavel por consultar o cep\n  async function GetCep(this: any, e: ChangeEvent<HTMLInputElement>) {\n    setAdress({\n      ...adress, //garante que o input só recebera numeros\n      [e.target.name]: e.target.value.replace(/\\D/g, \"\"),\n    });\n    let lengthCep = e.target.value.replace(/\\D/g, \"\").length;\n    let cepNumber = e.target.value.replace(/\\D/g, \"\");\n\n    //valida se o usuario digitou os 8 digitos cep para poder fazer a requisicao\n    if (lengthCep == 8) {\n      const resp = await api.post(`/CEP/${cepNumber}`);\n      console.log(resp.data.cep);\n      setAdress({\n        id: \"\",\n        cep: resp.data.cep == undefined ? \"\" : resp.data.cep,\n        logradouro:\n          resp.data.logradouro == undefined ? \"\" : resp.data.logradouro,\n        complemento:\n          resp.data.complemento == undefined ? \"\" : resp.data.complemento,\n        bairro: resp.data.bairro == undefined ? \"\" : resp.data.bairro,\n        localidade:\n          resp.data.localidade == undefined ? \"\" : resp.data.localidade,\n        uf: resp.data.uf == undefined ? \"\" : resp.data.uf,\n        id_doctor: \"\",\n      });\n\n    }\n  }\n\n  function UpdatedSpecialties(e: any) {\n    SpecialtiesSelect = e;\n  }\n  function UpdatedDoctor(e: ChangeEvent<HTMLInputElement>) {\n    setDoctor({\n      ...doctor,\n      [e.target.name]: e.target.value,\n    });\n  }\n  function UpdatedAdress(e: ChangeEvent<HTMLInputElement>) {\n    setAdress({\n      ...adress,\n      [e.target.name]: e.target.value,\n    });\n  }\n  async function FindDoctorAdress(params: { ID?: any }) {\n    let IDs = params.ID.split(\"&&\");\n    let id_adress = atob(IDs[0]);\n    let id_doctor = atob(IDs[1]);\n\n    const responseAdress = await api.post(`/AdressById/${id_doctor}`);\n    const responseDoctor = await api.post(`/InfoDoctorsById/${id_adress}`);\n\n    //\n    setAdress({\n      id: id_adress,\n      cep: responseAdress.data.cep,\n      logradouro: responseAdress.data.logradouro,\n      complemento: responseAdress.data.complemento,\n      bairro: responseAdress.data.bairro,\n      localidade: responseAdress.data.localidade,\n      uf: responseAdress.data.uf,\n      id_doctor: id_doctor,\n    });\n\n    setDoctor({\n      id: id_doctor,\n      nome:responseDoctor.data.name,\n      crm: responseDoctor.data.crm,\n      telFixo: responseDoctor.data.telFixo,\n      telCelular: responseDoctor.data.telCelular\n    })\n\n    console.log\n  }\n\n  async function onSubmit(e: ChangeEvent<HTMLFormElement>) {\n    e.preventDefault();\n\n    let numberCel = doctor.telCelular\n      .toString()\n      .replaceAll(\"(\", \"\")\n      .replace(\")\", \"\")\n      .replace(\"-\", \"\");\n    let numberFix = doctor.telFixo\n      .toString()\n      .replace(\"(\", \"\")\n      .replace(\")\", \"\")\n      .replace(\"-\", \"\");\n\n    doctor.telCelular = parseInt(numberCel);\n    doctor.telFixo = parseInt(numberFix);\n\n    const respDoctor = await api.post(\"/InfoDoctors\", doctor);\n    // console.log(respDoctor);\n    adress.id_doctor = respDoctor.data.id;\n    const respAdress = await api.post(\"/Adress\", adress);\n    console.log(respAdress);\n\n    var arraySpecialties: any[] = [];\n    const respSpecialties = await api.get(\"/Specialties\");\n\n    console.log(SpecialtiesSelect);\n    SpecialtiesSelect.forEach((index: any) => {\n      arraySpecialties.push(\n        respSpecialties.data.filter(\n          (s: { name: string }) => s.name === index.value\n        )\n      );\n    });\n\n    await Promise.all(\n      arraySpecialties.map(async (elem) => {\n        let id_specialties = elem[0].id;\n        let id_doctor = respDoctor.data.id;\n\n        const respSpecialtiesDoctor = await api.post(\n          \"/InfoDoctorsSpecialties\",\n          {\n            id_specialties: id_specialties,\n            id_doctor: id_doctor,\n          }\n        );\n      })\n    );\n  }\n\n  function Back() {\n    history.goBack();\n  }\n\n  return (\n    <div className=\"container\">\n      <br />\n      <div className=\"Header-doctors\">\n        <h1>Cadastro</h1>\n        <Button variant=\"dark\" size=\"sm\" onClick={Back}>\n          Voltar\n        </Button>\n      </div>\n      <br />\n      <div className=\"container\">\n        <Form onSubmit={onSubmit}>\n          <Form.Group>\n            <Form.Label>Nome</Form.Label>\n            <Form.Control\n              maxLength={120}\n              value={doctor.nome}\n              type=\"text\"\n              name=\"nome\"\n              onChange={(e: ChangeEvent<HTMLInputElement>) => UpdatedDoctor(e)}\n            />\n          </Form.Group>\n          <br />\n          <Form.Group>\n            <Row>\n              <Col>\n                <Form.Label>Tel. Celular</Form.Label>\n                <InputMask\n                  placeholder=\"(81)88888-8888\"\n                  value={doctor.telCelular}\n                  className=\"phone\"\n                  name=\"telCelular\"\n                  mask=\"(99)999999-9999\"\n                  onChange={(e: ChangeEvent<HTMLInputElement>) =>\n                    UpdatedDoctor(e)\n                  }\n                />\n              </Col>\n              <Col>\n                <Form.Label>Tel. Fixo</Form.Label>\n                <InputMask\n                  placeholder=\"(81)88888-8888\"\n                  value={doctor.telFixo}\n                  className=\"phone\"\n                  name=\"telFixo\"\n                  mask=\"(99)999999-9999\"\n                  onChange={(e: ChangeEvent<HTMLInputElement>) =>\n                    UpdatedDoctor(e)\n                  }\n                />\n              </Col>\n              <Col>\n                <Form.Label>CRM</Form.Label>\n                <Form.Control\n                  maxLength={7}\n                  value={doctor.crm}\n                  type=\"text\"\n                  name=\"crm\"\n                  onChange={(e: ChangeEvent<HTMLInputElement>) =>\n                    UpdatedDoctor(e)\n                  }\n                />\n              </Col>\n            </Row>\n            <br />\n            <Form.Label>Especialidades</Form.Label>\n            <Select\n              isMulti\n              name=\"specialties\"\n              options={SpecialtiesOptions}\n              className=\"basic-multi-select\"\n              classNamePrefix=\"Selecione\"\n              placeholder=\"Selecione\"\n              onChange={(e: any) => UpdatedSpecialties(e)}\n            />\n          </Form.Group>\n          <br />\n          <h3>Cadastro de Endereço</h3>\n\n          <Form.Group>\n            <Row>\n              <Col>\n                <Form.Label>CEP</Form.Label>\n                <Form.Control\n                  type=\"text\"\n                  name=\"cep\"\n                  maxLength={8}\n                  placeholder=\"Digite o CEP\"\n                  value={adress.cep}\n                  onChange={(e: ChangeEvent<HTMLInputElement>) => GetCep(e)}\n                />\n              </Col>\n              <Col>\n                <Form.Label>Cidade</Form.Label>\n                <Form.Control\n                  placeholder=\"\"\n                  type=\"text\"\n                  name=\"localidade\"\n                  value={adress.localidade}\n                  onChange={(e: ChangeEvent<HTMLInputElement>) =>\n                    UpdatedAdress(e)\n                  }\n                />\n              </Col>\n              <Col>\n                <Form.Label>Estado</Form.Label>\n                <Form.Control\n                  placeholder=\"\"\n                  type=\"text\"\n                  name=\"uf\"\n                  value={adress.uf}\n                  onChange={(e: ChangeEvent<HTMLInputElement>) =>\n                    UpdatedAdress(e)\n                  }\n                />\n              </Col>\n            </Row>\n            <Row>\n              <Col>\n                <Form.Label>Logradouro</Form.Label>\n                <Form.Control\n                  placeholder=\"\"\n                  type=\"text\"\n                  name=\"logradouro\"\n                  value={adress.logradouro}\n                  onChange={(e: ChangeEvent<HTMLInputElement>) =>\n                    UpdatedAdress(e)\n                  }\n                />\n              </Col>\n              <Col>\n                <Form.Label>Bairro</Form.Label>\n                <Form.Control\n                  placeholder=\"\"\n                  type=\"text\"\n                  name=\"bairro\"\n                  value={adress.bairro}\n                  onChange={(e: ChangeEvent<HTMLInputElement>) =>\n                    UpdatedAdress(e)\n                  }\n                />\n              </Col>\n              <Col>\n                <Form.Label>Complemento</Form.Label>\n                <Form.Control\n                  placeholder=\"\"\n                  type=\"text\"\n                  name=\"complemento\"\n                  value={adress.complemento}\n                  onChange={(e: ChangeEvent<HTMLInputElement>) =>\n                    UpdatedAdress(e)\n                  }\n                />\n              </Col>\n            </Row>\n          </Form.Group>\n          <br />\n          <Button variant=\"dark\" type=\"submit\">\n            Salvar\n          </Button>\n        </Form>\n      </div>\n    </div>\n  );\n};\n\nexport default Doctors;\n"]},"metadata":{},"sourceType":"module"}